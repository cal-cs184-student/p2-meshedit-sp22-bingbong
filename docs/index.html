<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
  <style>
    body {
      padding: 100px;
      width: 1000px;
      margin: auto;
      text-align: left;
      font-weight: 300;
      font-family: 'Open Sans', sans-serif;
      color: #121212;
    }

    h1,
    h2,
    h3,
    h4 {
      font-family: 'Source Sans Pro', sans-serif;
    }
  </style>
  <title>CS 184 Mesh Editor</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Source+Sans+Pro" rel="stylesheet">
</head>


<body>

  <h1 align="middle">CS 184: Computer Graphics and Imaging, Spring 2020</h1>
  <h1 align="middle">Project 2: Mesh Editor</h1>
  <h2 align="middle">Varun Saran, Ze-Ning Ong, CS184-bingbong</h2>

  <br><br>

      <div>

          <h2 align="middle">Overview</h2>
          <p>
              Give a high-level overview of what you implemented in this project. Think about what you've built as a whole.
              Share your thoughts on what interesting things you've learned from completing the project.
          </p>

          <h2 align="middle">Section I: Bezier Curves and Surfaces</h2>

          <h3 align="middle">Part 1: Bezier curves with 1D de Casteljau subdivision</h3>
          <p> De Casteljau's algorithm is a recursive algorithm that uses linear interpolation to eventually draw a smooth curve based on a set of given control points. What we did in this task was simply to evaluate a single step in the algorithm. For each point in the given set of control points, we interpolated between that point and the next point. We put all of these points in a vector to be returned for the next step in the algorithm.  </p>

          <p>Here is an example of De Casteljau's algorithm with 6 control points.</p>

          <div align="middle">
              <table style="width=100%">
                  <tr>
                      <td>
                          <img src="writeup/q1_0.png" align="middle" height="300" />
                          <figcaption align="middle">Control points</figcaption>
                      </td>
                      <td>
                          <img src="writeup/q1_1.png" align="middle" height="300" />
                          <figcaption align="middle">1st iteration</figcaption>
                      </td>
                  </tr>
                  <tr>
                      <td>
                          <img src="writeup/q1_2.png" align="middle" height="300" />
                          <figcaption align="middle">2nd iteration</figcaption>
                      </td>
                      <td>
                          <img src="writeup/q1_3.png" align="middle" height="300" />
                          <figcaption align="middle">3rd iteration</figcaption>
                      </td>
                  </tr>
                  <tr>
                      <td>
                          <img src="writeup/q1_4.png" align="middle" height="300" />
                          <figcaption align="middle">4th iteration</figcaption>
                      </td>
                      <td>
                          <img src="writeup/q1_5.png" align="middle" height="300" />
                          <figcaption align="middle">5th iteration</figcaption>
                      </td>
                  </tr>
              </table>
          </div>
          <br />
          <p>The final Bezier curve looks like this:</p>
          <div align="middle">
              <table style="width=100%">
                  <tr>
                      <td>
                          <img src="writeup/q1_final.png" align="middle" width="450px" />
                          <figcaption align="middle">Final curve</figcaption>
                      </td>
                  </tr>
              </table>
          </div>
          <br />
          <p>Here is the same curve, but with different t values:</p>
          <div align="middle">
              <table style="width=100%">
                  <tr>
                      <td>
                          <img src="writeup/q1_final_t0.png" align="middle" width="450px" />
                      </td>
                      <td>
                          <img src="writeup/q1_final_t1.png" align="middle" width="450px" />
                      </td>
                  </tr>
              </table>
          </div>
          <p>Here is an example of a slightly different Bezier curve:</p>
          <div align="middle">
              <table style="width=100%">
                  <tr>
                      <td>
                          <img src="writeup/q1_diff_t0.png" align="middle" width="450px" />
                      </td>
                      <td>
                          <img src="writeup/q1_diff_t1.png" align="middle" width="450px" />
                      </td>
                  </tr>
              </table>
          </div>


          <h3 align="middle">Part 2: Bezier surfaces with separable 1D de Casteljau subdivision</h3>

          <div align="middle">
              <table style="width=100%">
                  <tr>
                      <td>
                          <img src="writeup/q2.png" align="middle" width="450px" />
                          <figcaption align="middle">Teapot with bezier surfaces</figcaption>
                      </td>
                  </tr>
              </table>
          </div>


          <h2 align="middle">Section II: Sampling</h2>

          <h3 align="middle">Part 3: Average normals for half-edge meshes</h3>

          <div align="middle">
              <table style="width=100%">
                  <tr>
                      <td>
                          <img src="writeup/q3_flat.png" align="middle" height="280" />
                          <figcaption align="middle">Flat shading</figcaption>
                      </td>
                      <td>
                          <img src="writeup/q3_phong.png" align="middle" height="280" />
                          <figcaption align="middle">Phong shading</figcaption>
                      </td>
                  </tr>
              </table>
          </div>


          <h3 align="middle">Part 4: Half-edge flip</h3>
          <p>
              The first step in implementing our edge flip operation was saving all of the old edges, vertices, halfedges, and faces. After that, we drew out a detailed diagram of every single variable for the edge pre-flip and post-flip. We then went through and changed the pointers for each edge, face, vertex, and halfedge. For halfedges, we used the setNeighbors function.
          </p>
          <p>Here are the diagrams we used to code out this function:</p>
          <div align="middle">
              <table style="width=100%">
                  <tr>
                      <td>
                          <img src="writeup/diagram.png" align="middle" height="250" />
                          <figcaption align="middle">Pre-flip</figcaption>
                      </td>
                      <td>
                          <img src="writeup/diagram_flip.png" align="middle" height="250" />
                          <figcaption align="middle">Post-flip</figcaption>
                      </td>
                  </tr>
              </table>
          </div>
          <p>Here is a mesh before and after some flips:</p>
          <div align="middle">
              <table style="width=100%">
                  <tr>
                      <td>
                          <img src="writeup/q4_b.png" align="middle" height="600" />
                          <figcaption align="middle">Regular mesh</figcaption>
                      </td>
                      <td>
                          <img src="writeup/q4_a.png" align="middle" height="600" />
                          <figcaption align="middle">Mesh after some flips</figcaption>
                      </td>
                  </tr>
              </table>
          </div>
          <p>Debugging:</p>
          <p>
              We thought our implementation worked, but found out later that we messed up a single pointer when our 6 didn’t work :(. We went through it several times and didn’t find the issue. At this point, we added every single element in the mesh to our code. We tried to run the code several times, and observed different vertices and their attributes. We found that some vertices were saying that they had more neighbors than they actually had. Finally, we got it by saying each individual variable out loud and following the diagram. Turns out that we had misassigned the halfedge of a vertex, which lines up with the observations we made about the number of neighbors of a vertex.
          </p>

          <h3 align="middle">Part 5: Half-edge split</h3>
          <p>We followed the same steps as Part 4 – we drew a diagram, and used the same original variables that we used in Part 5. This helped us a lot, since we did not need to go back and re-save all of the variables in the mesh. After this, we had to make new elements in the mesh, which we did not have to do in Part 4.  Again, we changed the pointers for every edge, face, vertex, and halfedge. </p>
          <p>Here are the diagrams we used to code out this function:</p>
          <div align="middle">
              <table style="width=100%">
                  <tr>
                      <td>
                          <img src="writeup/diagram.png" align="middle" height="250" />
                          <figcaption align="middle">Pre-split</figcaption>
                      </td>
                      <td>
                          <img src="writeup/diagram_split.png" align="middle" height="250" />
                          <figcaption align="middle">Post-split</figcaption>
                      </td>
                  </tr>
              </table>
          </div>
          <p>Later, when we did Part 6, we realized that we needed to differentiate between old and new edges, as well as old and new vertices. In order to account for this, we created attributes isNew and isNew2 for edges, and isNew for vertices. isNew represents whether or not that edge is new and NOT split from the original edge. In other words, only nea and nec should be labeled isNew in our diagram. isNew2 represents which edges are new in general. So, in our diagram, nea, neb, and nec are labeled isNew2. We also labeled our new vertex, nv, as new. We set these attributes in this part so that they are set when we create new edges and vertices from a split. </p>
          <p>Here is a mesh before and after some flips and splits:</p>
          <div align="middle">
              <table style="width=100%">
                  <tr>
                      <td>
                          <img src="writeup/q5_b.png" align="middle" height="400" />
                          <figcaption align="middle">Regular mesh</figcaption>
                      </td>
                      <td>
                          <img src="writeup/q5_a.png" align="middle" height="400" />
                          <figcaption align="middle">Mesh after some flips and splits</figcaption>
                      </td>
                  </tr>
              </table>
          </div>
          <p>Debugging:</p>
          <p>Again, we did not realize there was a bug in this part until Part 6. One silly thing is that we named one of the old edges <i>hea</i>, and one of the new edges <i>nea</i>. It’s very hard to differentiate between <i>hea</i> and <i>nea</i> with our handwriting, so we mixed those up when we were actually coding it. </p>
          <h3 align="middle">Part 6: Loop subdivision for mesh upsampling</h3>
          <p>Here is a cube with loop subdivision:</p>
          <div align="center">
              <table style="width=100%">
                  <tr>
                      <td>
                          <img src="writeup/q6_0_cube.png" align="middle" height="400" />
                          <figcaption align="center">Original cube mesh</figcaption>
                      </td>
                      <td>
                          <img src="writeup/q6_1_cube.png" align="middle" height="400" />
                          <figcaption align="center">1st iteration</figcaption>
                      </td>
                  </tr>
                  <tr>
                      <td>
                          <img src="writeup/q6_2_cube.png" align="middle" height="400" />
                          <figcaption align="center">2nd iteration</figcaption>
                      </td>
                      <td>
                          <img src="writeup/q6_3_cube.png" align="middle" height="400" />
                          <figcaption align="center">3rd iteration</figcaption>
                      </td>
                  </tr>
                  <tr>
                      <td>
                          <img src="writeup/q6_4_cube.png" align="middle" height="400" />
                          <figcaption align="center">4th iteration</figcaption>
                      </td>
                      <td>
                          <img src="writeup/q6_5_cube.png" align="middle" height="400" />
                          <figcaption align="center">5th iteration</figcaption>
                      </td>
                  </tr>
              </table>
          </div>

          <p>Here is an example of another mesh with loop subdivision:</p>

          <div align="center">
              <table style="width=100%">
                  <tr>
                      <td>
                          <img src="writeup/q6_0_weird.png" align="middle" height="250" />
                          <figcaption align="center">Original weird mesh</figcaption>
                      </td>
                  </tr>
              </table>
          </div>
          <div align="center">
              <table style="width=100%">
                  <tr>
                      <td>
                          <img src="writeup/q6_1_weird.png" align="middle" height="250" />
                          <figcaption align="center">1st iteration</figcaption>
                      </td>
                      <td>
                          <img src="writeup/q6_2_weird.png" align="middle" height="250" />
                          <figcaption align="center">2nd iteration</figcaption>
                      </td>
                  </tr>
              </table>
          </div>
      </div></body>

</html>